<ngx-loading
  [show]="loading"
  [config]="{ backdropBorderRadius: '3px', fullScreenBackdrop: true }"
>
</ngx-loading>

<div class="container-fluid p-0">
  <div class="row">
    <div class="col-sm-12">
      <div class="card1">
        <div class="card-header bg-white d-flex justify-content-between">
          <div class="col-12 p-0">
            <div class="form-row">
              <div class="form-group col-sm-2 m-0">
                <label for="cmbCustomer"  class="mb-2 mr-sm-2" #flocation
                  >Customer Name:</label
                >
                <select
                  class="custom-select mb-3"
                  (change)="onChangeCustomer($event.target.value)"
                  id="cmbCustomer"
                  (click)="t.select(3)"
                  [(ngModel)]="cmbCustomerId"
                >
                  <option selected value="0"></option>
                  <option *ngFor="let cLst of CustomerList" [value]="cLst.Id">
                    {{ cLst.DisplayName }}
                  </option>
                </select>
              </div>
              <div class="form-group col-sm-1 m-0 d-none">
                <ul class="navbar-nav">
                  <li class="nav-item dropdown">
                    <label for="navbarDropdownMenuLink" class="d-none d-xl-block mb-2 mr-sm-2"
                  >&nbsp;</label
                >
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      <i class="fa fa-cog fa-lg" aria-hidden="true"></i>
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                      <a class="dropdown-item" href="javascript:;" (click)="SetDefaultClient(modalMediaTypeDefault)"
                      *ngIf="this.auth.IsAdminLogin$.value===false && this.auth.chkEventMeeting$.value === false ">
                        Set Default
                      </a>
                      <a class="dropdown-item" href="javascript:;" (click)="SetSignage(modalSignage)"
                      *ngIf="((this.auth.chkEventMeeting$.value ==false))">
                        Set Signage App Logo
                      </a>
                      
                      <a class="dropdown-item" href="javascript:;" (click)="SetIndicator(true)" 
                      *ngIf="((this.auth.chkEventMeeting$.value ==false))">
                        Show Indicator
                      </a>
                      <a class="dropdown-item" href="javascript:;" (click)="SetIndicator(false)" 
                      *ngIf="((this.auth.chkEventMeeting$.value ==false))">
                        Disable Indicator
                      </a>
                      <a class="dropdown-item" href="javascript:;" (click)="ForceUpdateModal(modalForceUpdate)"
                      *ngIf="((this.auth.chkEventMeeting$.value ==false))">
                        Publish
                      </a>
                      <a class="dropdown-item" href="javascript:;"  (click)="BulkActivation(modalUploadExcel)"
                      *ngIf="((this.auth.chkEventMeeting$.value ==false))">
                        Bulk Activation
                      </a>
                      <a class="dropdown-item" href="javascript:;" (click)="ForceUpdateModal(modalExpiryDate)" 
                      *ngIf="((this.auth.chkEventMeeting$.value ==false))">
                        Set Expiry Date
                      </a>
                      <a class="dropdown-item" href="javascript:;" (click)="openEventModal(modalEvent)">
                        Events/Meeting Rooms
                      </a>
                      <a class="dropdown-item" href="javascript:;" (click)="OpenGroupsModal(modalManageGroups)"
                      *ngIf="((this.auth.chkEventMeeting$.value ==false))">
                        Groups
                      </a>
                      <a class="dropdown-item" href="javascript:;" (click)="OpenOpeningHoursModal(modalManageOpeningHours)"
                      *ngIf="((this.auth.chkEventMeeting$.value ==false))">
                        Opening Hours/Reboot Time
                      </a>
                      <a class="dropdown-item" href="javascript:;" (click)="OpenUpdateInfo(modalUpdateInfo)"
                      *ngIf="((this.auth.chkEventMeeting$.value ==false))">
                        Copy Player Info
                      </a>
                    </div>
                  </li>
                </ul>
              </div>
              <div class="form-group col-sm-1 m-0 " *ngIf="this.auth.IsAdminLogin$.value===false && this.auth.chkEventMeeting$.value === false ">
                <label for="btnDF" class="d-none d-xl-block mb-2 mr-sm-2"
                  >&nbsp;</label
                >
                <input
                  type="button"
                  id="btnDF"
                  class="btn btn-primary mb-2 mr-sm-2 mr-1"
                  value="Set Default" (click)="SetDefaultClient(modalMediaTypeDefault)"
                  style="width: 100%;font-size: 14px;
                  padding: 0.475rem 0.6rem"
                />
              </div>
              <div *ngIf="((this.auth.chkEventMeeting$.value ==false))" class="form-group col-sm-1 m-0">
                <label for="btnSig" class="d-none d-xl-block mb-2 mr-sm-2"
                  >&nbsp;</label
                >
                <input
                  type="button"
                  id="btnSig"
                  class="btn btn-primary mb-2 mr-sm-2 mr-1"
                  (click)="SetSignage(modalSignage)"
                  value="Set App Logo"
                  style="width: 100%;font-size: 14px;
                  padding: 0.475rem 0.6rem"
                />
              </div>
              <div *ngIf="((this.auth.chkEventMeeting$.value ==false))" class="form-group col-sm-1 m-0">
                <label for="btnIndi" class="d-none d-xl-block mb-2 mr-sm-2"
                  >&nbsp;</label
                >
                <input
                  type="button"
                  id="btnIndi"
                  class="btn btn-primary mb-2 mr-sm-2 mr-1"
                  (click)="SetIndicator(true)"
                  value="Show Indicator"
                  style="width: 100%;width: 100%;font-size: 14px;padding: 0.475rem 0.60rem;"
                />
              </div>
              <div *ngIf="((this.auth.chkEventMeeting$.value ==false))" class="form-group col-sm-1 m-0">
                <label for="btnIndi" class="d-none d-xl-block mb-2 mr-sm-2"
                  >&nbsp;</label
                >
                <input
                  type="button"
                  id="btnIndi"
                  class="btn btn-primary mb-2 mr-sm-2 mr-1"
                  (click)="SetIndicator(false)"
                  value="Disable Indicator"
                  style="width: 100%;width: 100%;font-size: 14px;padding: 0.475rem 0.20rem;"
                />
              </div>
              <div *ngIf="((this.auth.chkEventMeeting$.value ==false))" class="form-group col-sm-1 m-0">
                <label for="btnForce" class="d-none d-xl-block mb-2 mr-sm-2"
                  >&nbsp;</label
                >
                <input
                  type="button"
                  id="btnForce"
                  class="btn btn-primary mb-2 mr-sm-2 mr-1"
                  (click)="ForceUpdateModal(modalForceUpdate)"
                  value="Publish"
                  style="width: 100%;width: 100%;font-size: 14px;padding: 0.475rem 0.20rem;"
                />
              </div>
              <div *ngIf="((this.auth.chkEventMeeting$.value ==false))" class="form-group col-sm-1 m-0">
                <label for="btnExport" class="d-none d-xl-block mb-2 mr-sm-2"
                  >&nbsp;</label
                >
                <input
                  type="button"
                  id="btnExport"
                  class="btn btn-primary mb-2 mr-sm-2 mr-1"
                  (click)="BulkActivation(modalUploadExcel)"
                  value="Bulk"
                  style="width: 100%;font-size: 14px;
                  padding: 0.475rem 0.6rem"
                />
              </div>
              <div *ngIf="((this.auth.chkEventMeeting$.value ==false))" class="form-group col-sm-1 m-0">
                <label for="btnExport" class="d-none d-xl-block mb-2 mr-sm-2"
                  >&nbsp;</label
                >
                <input
                  type="button"
                  id="btnExport"
                  class="btn btn-primary mb-2 mr-sm-2 mr-1"
                  (click)="ForceUpdateModal(modalExpiryDate)"
                  value="Expiry Date"
                  style="width: 100%;font-size: 14px;
                  padding: 0.475rem 0.6rem"
                />
              </div>
              <div class="form-group col-sm-1 m-0">
                <label for="btnUploadEvent" class="d-none d-xl-block mb-2 mr-sm-2"
                  >&nbsp;</label
                >
                <input
                  type="button"
                  id="btnUploadEvent"
                  class="btn btn-primary mb-2 mr-sm-2 mr-1"
                  (click)="openEventModal(modalEvent)"
                  value="Meeting Rooms"
                  style="width: 100%;width: 100%;font-size: 14px;padding: 0.475rem 0.20rem;"
                />
              </div>
             
              
              <div class="form-group col-sm-2 m-0 d-none">
                <label for="btnSearch" class="d-none d-xl-block mb-2 mr-sm-2"
                  >&nbsp;</label
                >
                <input
                  id="btnSearch"
                  type="text"
                  class="float-right"
                  id="cName"
                  [(ngModel)]="searchText"
                  autocomplete="off"
                  placeholder="&#61442;  Search any text"
                  class="form-control mb-2 mr-sm-2"
                  style="width: 100%"
                />
              </div>
            </div>
          </div>
        </div>
        <!-- card-body start -->
        <div class="card-body pl-0 pr-0">
          <ul
            ngbNav
            #t="ngbNav"
            [(activeId)]="active"
            (navChange)="onNavChange($event)"
            class="nav nav-pills mb-3"
          >
            <li [ngbNavItem]="1" class="pr-2  p-0" [ngClass]="this.auth.chkEventMeeting$.value ==false?'col-2': 'col-2'" >
              <div class="iq-search-bar device-search">
                <div class="searchbox1">
                  <input
                    id="txtSearchExt"
                    ngbNavLink
                    type="text"
                    [(ngModel)]="searchText"
                    class="text search-input"
                    placeholder="Search"
                    (input)="onChangeTokenEvent()"
                    
                  />
                  <a class="search-link" href="javascript:;" 
                  style="right: 50px;"><i class="fa fa-search"></i
                  ></a>
                  <a class="search-link refreshIcon" href="javascript:;" (click)="RefreshTokenList()"><i class="fa fa-refresh text-white"></i></a>
                  <ng-template ngbNavContent> </ng-template>
                </div>
              </div>
            </li>

            <li [ngbNavItem]="2">
              <a
                ngbNavLink
                (click)="FilterTokenList('All')"
                class="form-control-Tab mt-1"
                >All</a
              >
              <ng-template ngbNavContent> </ng-template>
            </li>
            <li [ngbNavItem]="3">
              <a
                ngbNavLink
                (click)="FilterTokenList('Regsiter')"
                class="form-control-Tab mt-1"
                >Registered</a
              >
              <ng-template ngbNavContent> </ng-template>
            </li>
            <li [ngbNavItem]="4">
              <a
                ngbNavLink
                (click)="FilterTokenList('Audio')"
                class="form-control-Tab mt-1"
                >Audio</a
              >
              <ng-template ngbNavContent> </ng-template>
            </li>

            <li [ngbNavItem]="5">
              <a
                ngbNavLink
                (click)="FilterTokenList('Video')"
                class="form-control-Tab mt-1"
                >Video</a
              >
              <ng-template ngbNavContent> </ng-template>
            </li>
            <li [ngbNavItem]="6" *ngIf="isSanitizerActive">
              <a
                ngbNavLink
                (click)="FilterTokenList('Sanitizer')"
                class="form-control-Tab mt-1"
                >Sanitizer</a
              >
              <ng-template ngbNavContent> </ng-template>
            </li>

            <li [ngbNavItem]="7">
              <a
                ngbNavLink
                (click)="FilterTokenList('Signage')"
                class="form-control-Tab mt-1"
                >Signage</a
              >
              <ng-template ngbNavContent> </ng-template>
            </li>
            <li [ngbNavItem]="8">
              <a
                ngbNavLink
                (click)="FilterTokenList('HotelTv')"
                class="form-control-Tab mt-1"
                >H-Info</a
              >
              <ng-template ngbNavContent> </ng-template>
            </li>
            <li [ngbNavItem]="9">
              <a
                ngbNavLink
                (click)="FilterTokenList('UnRegsiter')"
                class="form-control-Tab mt-1"
                >Un-Registered</a
              >
              <ng-template ngbNavContent> </ng-template>
            </li>
             
            <li [ngbNavItem]="10" *ngIf="((this.auth.chkEventMeeting$.value ==false))">
              <a
                ngbNavLink
                (click)="OpenGroupsModal(modalManageGroups)"
                class="form-control-Tab mt-1"
                >Groups</a
              >
              <ng-template ngbNavContent> </ng-template>
            </li>
            <li [ngbNavItem]="11" *ngIf="((this.auth.chkEventMeeting$.value ==false))">
              <a
                ngbNavLink
                (click)="OpenOpeningHoursModal(modalManageOpeningHours)"
                class="form-control-Tab mt-1"
                >Opening/Reboot Time</a
              >
              <ng-template ngbNavContent> </ng-template>
            </li>
            <li [ngbNavItem]="12" *ngIf="((this.auth.chkEventMeeting$.value ==false))">
              <a
                ngbNavLink
                (click)="OpenUpdateInfo(modalUpdateInfo)"
                class="form-control-Tab mt-1"
                >Player Info</a
              >
              <ng-template ngbNavContent> </ng-template>
            </li> 
           
          </ul>
          <div class="tab-content">
            <div class="table-responsive">
              <table
                class="table data-table table-striped table-bordered mydatatable"
              >
                <thead class="bg-primary text-white">
                  <tr>
                    <!--<th scope="col" [appSort]="TokenList" data-order="asc" data-name="tokenCode">Token Code</th>
                  <th scope="col" [appSort]="TokenList" data-order="asc" data-name="location">Location </th>
                  -->
                    <th scope="col" style="width: 120px !important">City</th>
                    <th scope="col" style="width: 190px !important">
                      Location
                    </th>
                    <!--
    <th scope="col" style="width:120px !important;">Player Type </th>
                  -->
                    <th scope="col" style="width: 110px !important">
                      Media Type
                    </th>
                    <th scope="col" style="width: 190px !important">Group</th>
                    <th scope="col" style="width: 210px !important">
                      Token Code
                    </th>
                    <th scope="col" style="width: 90px !important">
                      Fix IP
                    </th>
                    <th scope="col" style="width: 110px !important">
                      Time Zone
                    </th>
                    <th scope="col" style="width: 110px !important">
                      Avail. Space
                    </th>
                    <th scope="col" style="width: 50px !important" data-toggle="tooltip" data-placement="top" title="Player Version">V.</th>
                    <th scope="col" style="width: 30px !important" data-toggle="tooltip" data-placement="top" title="Publish Status">S.</th>
                    <th scope="col" style="width: 30px !important" data-toggle="tooltip" data-placement="top" title="Content Download Status">D.</th>
                    <th scope="col" style="width: 35px !important" data-toggle="tooltip" data-placement="top" title="Online Indicator">OI</th>
                    <th scope="col" style="width: 30px !important" data-toggle="tooltip" data-placement="top" title="Hotel Tv Indicator">HI</th>
                    <th scope="col" style="width: 30px !important"></th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let cLst of TokenList | filter:searchText | slice
                  : (pagePlayer - 1) * pageSizePlayer
                  : (pagePlayer - 1) * pageSizePlayer + pageSizePlayer; let i = index">
                    <td data-label="City" style="font-size: 13px !important;">
                      {{ cLst.city }}
                    </td>
                    <td data-label="Location" style="font-size: 13px !important;">
                      {{ cLst.location }}
                    </td>
                    <!--
                  <td data-label="Player Type ">
                    {{cLst.playerType}}
                  </td>
                  -->

                    <td data-label="Media Type" style="font-size: 13px !important;">
                      {{ cLst.MediaType }}
                    </td>
                    <td data-label="Group" style="font-size: 13px !important;">
                      {{ cLst.gName }}
                    </td>
                    <td data-label="Token Code" style="font-size: 13px !important;">
                      {{ cLst.tokenCode }}
                    </td>
                    <td data-label="Token Code" style="font-size: 13px !important;">
                      {{ cLst.FixIp }}
                    </td>
                    <td data-label="Time Zone" style="font-size: 13px !important;">
                      {{ cLst.tZone }}
                    </td>
                    <td
                      data-label="Available Space"
                      *ngIf="cLst.fSpace === '0 MB'" style="font-size: 13px !important;"
                    ></td>
                    <td
                      data-label="Available Space"
                      *ngIf="cLst.fSpace != '0 MB'" style="font-size: 13px !important;"
                    >
                      {{ cLst.fSpace }}
                    </td>
                    <!--
                  <td data-label="Space">
                    <div *ngIf="cLst.token =='used'"  class="progress">
                    <div *ngIf="cLst.SpaceStatus == 50" class="progress-bar bg-success" [ngStyle]="{'width.%':cLst.SpacePer}"></div>
                      <div *ngIf="cLst.SpaceStatus == 75" class="progress-bar bg-warning" [ngStyle]="{'width.%':cLst.SpacePer}"></div>
                      <div *ngIf="cLst.SpaceStatus == 100" (click)="onDeletePlaylistSongModal(DeletePlaylistSongsModal,cLst.tokenid)" class="progress-bar bg-danger" [ngStyle]="{'width.%':cLst.SpacePer}"></div>
                    </div>
                    <div *ngIf="cLst.token !='used'"  class="progress">
                      <div class="progress-bar" style="width:0%"></div>
                    </div>
                  </td>
                  -->

                    <td data-label="">
                      {{ cLst.Version }}
                    </td>
                    <td data-label="" class="text-center" >
                      <i *ngIf="cLst.PublishUpdate == 'True'" class="fa fa-lg fa-square text-danger" aria-hidden="true"  data-toggle="tooltip" data-placement="top" title="Update"></i>
                      <i *ngIf="cLst.PublishUpdate == 'False'" class="fa fa-lg fa-square text-success" aria-hidden="true"  data-toggle="tooltip" data-placement="top" title="Updated"></i>
                  </td>
                  <td data-label="" class="text-center">
                    <i *ngIf="cLst.IsDownloadAll == 'false'" class="fa fa-lg fa-square text-primary" aria-hidden="true"  data-toggle="tooltip" data-placement="top" title="Download not completed" ></i>
                    <i *ngIf="cLst.IsDownloadAll == 'true'" class="fa fa-lg fa-square text-success" aria-hidden="true" data-toggle="tooltip" data-placement="top" title="Download  Completed"></i>
                </td>

<!-- 
                    <td
                      data-label=""
                      class="text-center"
                      *ngIf="
                        IsForceUpdateRunning == false &&
                        IsForceUpdateAll == false
                      "
                    >
                      <input
                        *ngIf="cLst.PublishUpdate == 'True'"
                        type="button"
                        class="btn btn-sm btn-danger p-1 m-0"
                        (click)="ForceUpdate(cLst.tokenid, i)"
                        value="Update1 &nbsp;"
                      />

                      <input
                        *ngIf="cLst.PublishUpdate == 'False'"
                        type="button"
                        class="btn btn-sm bg-success p-1 m-0"
                        (click)="ForceUpdate(cLst.tokenid, i)"
                        value="Updated1"
                      />
                    </td>

                    <td
                      data-label=""
                      style="padding: 0; margin: 0"
                      class="text-center"
                      *ngIf="
                        IsForceUpdateRunning == true && enableEditIndex != i
                      "
                    >
                      <input
                        *ngIf="cLst.PublishUpdate == 'True'"
                        type="button"
                        class="btn btn-danger p-1 m-0"
                        (click)="ForceUpdate(cLst.tokenid, i)"
                        value="Update &nbsp;"
                        style="font-size: 0.975rem"
                      />

                      <input
                        *ngIf="cLst.PublishUpdate == 'False'"
                        type="button"
                        class="btn bg-success p-1 m-0"
                        style="font-size: 0.975rem"
                        value="Updated"
                      />
                    </td>

                    <td
                      data-label=""
                      class="text-center"
                      *ngIf="
                        IsForceUpdateRunning == true && enableEditIndex == i
                      "
                    >
                      <div class="progress" *ngIf="cLst.token == 'used'">
                        <div
                          class="progress-bar progress-bar-striped progress-bar-animated"
                          [style.width.%]="ForceUpdateBar"
                        ></div>
                      </div>

                      <input
                        *ngIf="cLst.token != 'used'"
                        type="button"
                        class="btn btn-danger p-1 m-0"
                        value="Update &nbsp;"
                        style="font-size: 0.975rem"
                      />
                    </td>
                    <td
                      data-label=""
                      style="padding: 0; margin: 0"
                      *ngIf="
                        IsForceUpdateRunning == false &&
                        IsForceUpdateAll == true
                      "
                    >
                      <div class="progress" *ngIf="cLst.token == 'used'">
                        <div
                          class="progress-bar progress-bar-striped progress-bar-animated"
                          [style.width.%]="ForceUpdateBar"
                        ></div>
                      </div>

                      <input
                        *ngIf="cLst.token != 'used'"
                        type="button"
                        class="btn btn-danger p-1 m-0"
                        value="Update &nbsp;"
                        style="font-size: 0.975rem"
                      />
                    </td>
 -->
                    <td data-label="" *ngIf="IsIndicatorShow == true">
                      <img
                        src="/assets/img/green.png"
                        alt="green"
                        *ngIf="cLst.IsIndicatorActive == '1'"
                        style="
                          width: 20px;
                          margin-left: auto;
                          margin-right: auto;
                          display: block;
                        "  data-toggle="tooltip" data-placement="top" title="Online Indicator"
                      />
                      <img
                        src="/assets/img/red.png"
                        alt="green"
                        *ngIf="cLst.IsIndicatorActive == '0'"
                        style="
                          width: 20px;
                          margin-left: auto;
                          margin-right: auto;
                          display: block;
                        " data-toggle="tooltip" data-placement="top" title="Online Indicator"
                      />
                    </td>
                    <td data-label="" *ngIf="IsIndicatorShow == false">
                      <img
                        src="/assets/img/red.png"
                        alt="green"
                        style="
                          width: 20px;
                          margin-left: auto;
                          margin-right: auto;
                          display: block;
                        " data-toggle="tooltip" data-placement="top" title="Online Indicator"
                      />
                    </td>
                    <td data-label="">
                      <span *ngIf="cLst.DeviceType == 'HotelTv'">
                      <i *ngIf="cLst.IshotelTvOnline == '0'" class="fa fa-lg fa-square text-danger" aria-hidden="true"  data-toggle="tooltip" data-placement="top" title="H-Info Indicator"></i>
                      <i *ngIf="cLst.IshotelTvOnline == '1'" class="fa fa-lg fa-square text-success" aria-hidden="true"  data-toggle="tooltip" data-placement="top" title="H-Info Indicator"></i>
                    </span>
                    <span *ngIf="cLst.DeviceType != 'HotelTv'">
                      <i class="fa fa-lg fa-square text-muted" aria-hidden="true"  data-toggle="tooltip" data-placement="top" title="H-Info is not active"></i>
                    </span>
                    </td>
                    <td
                      data-label=""
                      class="text-center m-0 p-0"
                      (click)="open(content, cLst.tokenid)"
                    >
                      <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                    </td>
                   
                  </tr>
                </tbody>
              </table>
              <ngb-pagination
                  [collectionSize]="ActivePlayerListlength"
                  [(page)]="pagePlayer"
                  [pageSize]="pageSizePlayer"
                  [boundaryLinks]="true"
                  size="sm"
                ></ngb-pagination>
            </div>
          </div>
        </div>
        <!-- tab content start -->
        <!-- tab -->
        <!-- card-body end -->
      </div>
    </div>
  </div>
</div>

<ng-template #content let-c="close" let-d="dismiss">
  <div class="modal-header bg-primary">
    <h5 class="text-white">Token Information ({{ Token_Id_App }})</h5>
    <button
      type="button"
      class="close text-white"
      aria-label="Close"
      (click)="tokenInfoClose()"
    >
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body p-1">
    <app-token-info></app-token-info>
  </div>
</ng-template>

<ng-template #modalSignage let-c="close" let-d="dismiss">
  <div class="modal-header bg-primary">
    <h5 class="text-white">Signage App Logo</h5>
    <button
      type="button"
      class="close text-white"
      aria-label="Close"
      (click)="d('Cross click')"
    >
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <div class="col-12 p-0">
      <label class="col-md-2 p-0">Folder Name:</label>
      <select
        name="cmbCustomer"
        class="col-md-3 custom-select mb-3 mt-2"
        (change)="onChangeFolder($event.target.value)"
        id="cmbFolder"
        [(ngModel)]="cmbFolder"
      >
        <option selected value="0"></option>
        <option value="777">All</option>
        <option *ngFor="let cLst of FolderList" [value]="cLst.Id">
          {{ cLst.DisplayName }}
        </option>
      </select>
    </div>
    <div class="row">
      <div class="col-sm-4 col-6 mb-2" *ngFor="let songLst of SongsList">
        <div class="card">
          <img
            class="card-img-top p-1"
            src="{{ songLst.TitleIdLink }}"
            alt="Card image"
            style="height: 100px; object-fit: contain"
          />
          <div class="card-body p-1 border-top">
            <a
              href="javascript:;"
              (click)="SetLogo(songLst.id)"
              class="btn btn-primary btn-sm"
              >Set</a
            >
            <a
              href="javascript:;"
              (click)="OpenFullImageModal(modalFullImage, songLst.TitleIdLink)"
              (click)="d('Cross click')"
              class="ml-5"
              >Full View</a
            >
            <a
              *ngIf="LogoId != songLst.id"
              href="javascript:;"
              (click)="DeleteLogoModal(LogoDeleteModal, songLst.id)"
              class="btn btn-danger btn-sm"
              style="padding: 9px; margin: 0px; float: right"
            >
              <i
                class="fa fa-trash-o float-right p-0 m-0"
                aria-hidden="true"
              ></i>
            </a>
            <i
              *ngIf="LogoId == songLst.id"
              class="fa fa-check-circle float-right pt-2"
              style="color: green; font-size: 1.2em; margin-top: -0.2em"
              aria-hidden="true"
            ></i>
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-template>

<ng-template #modalFullImage let-c="close" let-d="dismiss">
  <div class="modal-header bg-primary">
    <button
      type="button"
      class="close text-white"
      aria-label="Close"
      (click)="SetSignage(modalSignage)"
      (click)="d('Cross click')"
    >
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body bg-white">
    <div class="row">
      <div class="col-lg-12">
        <img
          class="p-1"
          src="{{ FullImageUrl }}"
          alt="Card image"
          style="
            margin-left: auto;
            margin-right: auto;
            display: block;
            object-fit: contain;
          "
        />
      </div>
    </div>
  </div>
</ng-template>

<ng-template #LogoDeleteModal let-c="close" let-d="dismiss">
  <div class="modal-header bg-primary">
    <h5 class="text-white">Delete Logo</h5>
    <button
      type="button"
      class="close text-white"
      aria-label="Close"
      (click)="d('Cross click')"
    >
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <div class="container-fluid">
      <div class="row">
        <div class="col-sm-12">
          <p>Are you sure to delete?</p>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-12">
          <button
            class="btn btn-primary col-sm-2 pull-right"
            (click)="d('Cross click')"
          >
            <i class="fa fa-times fa-lg" aria-hidden="true"></i>
          </button>
          <button
            class="btn btn-danger col-sm-2 pull-right mr-2"
            (click)="DeleteLogo()"
            (click)="d('Cross click')"
          >
            <i class="fa fa-check fa-lg" aria-hidden="true"></i>
          </button>
        </div>
      </div>
    </div>
  </div>
</ng-template>

<ng-template #modalUploadExcel let-c="close" let-d="dismiss">
  <div class="modal-header bg-primary">
    <h5 class="text-white">Bulk Activation</h5>
    <button
      type="button"
      class="close text-white"
      aria-label="Close"
      (click)="d('Cross click')"
    >
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <div class="row mb-2" *ngIf="!uExcel">
      <div class="col-lg-12">
        <label for="btnExport" class="mb-2 mr-sm-2">Step 1.</label>
        <input
          type="button"
          id="btnExport"
          class="btn btn-primary"
          (click)="ExportExcel()"
          value="Export tokens to excel sheet"
          style="width: 100%"
        />
      </div>
    </div>
    <div class="row mb-2" *ngIf="!uExcel">
      <div class="col-lg-12">
        <label for="btnUp" class="mb-2 mr-sm-2">Step 2.</label>
        <input
          type="button"
          id="btnUp"
          class="btn btn-primary"
          (click)="UploadExcel()"
          value="Upload excel sheet"
          style="width: 100%"
        />
      </div>
    </div>

    <div *ngIf="uExcel">
      <div class="row">
        <div class="col-lg-12">
          <input
            type="file"
            name="profile"
            #myInput
            (change)="onSelectedFile($event)"
            id="chooseFile1"
            accept=".xlsx"
            class="btn btn-default border"
            style="width: 100%"
          />
        </div>
      </div>

      <div class="row mt-2">
        <div class="col-lg-12">
          <div *ngIf="fileUpload.status === 'progress'">
            <div class="progress" style="height: 20px; margin-bottom: 20px">
              <div
                class="progress-bar"
                role="progressbar"
                [style.width.%]="fileUpload.message"
                aria-valuenow="25"
                aria-valuemin="0"
                aria-valuemax="100"
              >
                {{ fileUpload.message }}%
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row mt-2">
        <div class="col-lg-12">
          <button
            type="button"
            class="btn btn-danger btn-s float-right ml-2"
            (click)="Cancel()"
          >
            Cancel
          </button>
          <button
            type="button"
            class="btn btn-primary btn-s float-right"
            (click)="Upload()"
            (click)="myInput.value = ''"
          >
            <span class="fa fa-cloud-upload"></span> Upload
          </button>
        </div>
      </div>
    </div>
  </div>
</ng-template>

<ng-template #modalForceUpdate let-c="close" let-d="dismiss">
  <div class="modal-header bg-primary">
    <h5 class="text-white">Publish</h5>
    <button
      type="button"
      class="close text-white"
      aria-label="Close"
      (click)="d('Cross click')"
    >
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <div class="row">
      <div class="col-lg-12">
        <ul ngbNav #tPublish="ngbNav" [(activeId)]="PublishActive" class="nav-tabs">
          <li [ngbNavItem]="1" class="pr-2">
            <a ngbNavLink>Publish</a>
            <ng-template ngbNavContent>
              <div class="row">
                <div class="col-lg-6">
                  <input
                  id="txtSearchExt"
                  type="text"
                  [(ngModel)]="searchTextPublish"
                  class="text search-input"
                  placeholder="Search"
                  class="form-control mb-2 mr-sm-2 w-75"
                  (input)="onChangeEvent()"
                />
                </div>
                <div class="col-lg-6">
                  
                  <input
                    type="button"
                    class="btn btn-primary pull-right mb-2 ml-2"
                    value="Publish with Schedule"
                    (click)="ForceUpdateAll('Schedule')"
                  />
                  <input
                    type="button"
                    class="btn btn-primary pull-right mb-2"
                    value="Publish Now"
                    (click)="ForceUpdateAll('Now')"
                  />
                </div>
                <div class="col-sm-12 font-weight-bold mb-3 p-0" >
                  <p style="margin: 0 !important">You can use any keyword from media type, city , location,token no. For Example: Audio, Video, Signage etc.</p>
                </div>
                    <div class="col-lg-12 m-0 p-0">
                  <div class="table-responsive">
                    <table
                      class="table data-table table-striped table-bordered mydatatable"
                    >
                      <thead class="bg-primary text-white">
                        <tr>
                          <th scope="col" style="width: 60px">
                            <div class="custom-control custom-checkbox">
                              <input
                                (change)="allActiveToken($event)"
                                type="checkbox"
                                class="custom-control-input"
                                name="AllActiveToken"
                                id="AllActiveToken"
                                [(ngModel)]="chkAll"
                              />
                              <label
                                class="custom-control-label cursor-pointer pt-1 text-white"
                                for="AllActiveToken"
                                >All</label
                              >
                            </div>
                          </th>
                          <th scope="col" sortable="city" (sort)="onSort($event)">City</th>
                          <th scope="col" sortable="location" (sort)="onSort($event)">Location</th>
                          <th scope="col" sortable="tokenCode" (sort)="onSort($event)">Token No</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="let tLst of ActiveTokenList | filter:searchTextPublish | slice
                        : (page - 1) * pageSize
                        : (page - 1) * pageSize + pageSize; let i = index ">
                          <td data-label="" class="">
                            <div class="custom-control custom-checkbox">
                              <input
                                (change)="SelectActiveToken(tLst.tokenid, $event)"
                                type="checkbox"
                                class="custom-control-input"
                                id="{{ tLst.tokenid }}{{ i }}"
                                [checked]="tLst.check"
                                name="chkTokenList"
                              />
                              <label
                                class="custom-control-label cursor-pointer"
                                for="{{ tLst.tokenid }}{{ i }}"
                              ></label>
                            </div>
                          </td>
                          <td data-label="City">{{ tLst.city }}</td>
                          <td data-label="Location">{{ tLst.location }}</td>
                          <td data-label="Token No">{{ tLst.tokenCode }}</td>
                        </tr>
                      </tbody>
                    </table>
                    <ngb-pagination
                                    [collectionSize]="ActiveTokenListlength"
                                    [(page)]="page"
                                    [pageSize]="pageSize"
                                    [boundaryLinks]="true"
                  size="sm"
                                    (click)="GetCheckedToken()"
                                  ></ngb-pagination>
                  </div>
                </div>
              </div>
            </ng-template>
          </li>
          <li [ngbNavItem]="2" class="pr-2">
            <a ngbNavLink>Publish Schedule</a>
            <ng-template ngbNavContent>
              <div class="form-row">
                <div class="form-group col-sm-3 m-0">
                  <label for="cmbHour" class="mb-2 mr-sm-2" >Hour:</label>
                  <select class="custom-select mb-3" id="cmbHour" [(ngModel)]="cmbPublishHour">
                    <option value="1">01</option>
                    <option value="2">02</option>
                    <option value="3">03</option>
                    <option value="4">04</option>
                    <option value="5">05</option>
                    <option value="6">06</option>
                    <option value="7">07</option>
                    <option value="8">08</option>
                    <option value="9">09</option>
                    <option value="10">10</option>
                    <option value="11">11</option>
                    <option value="12">12</option>
                    <option value="13">13</option>
                    <option value="14">14</option>
                    <option value="15">15</option>
                    <option value="16">16</option>
                    <option value="17">17</option>
                    <option value="18">18</option>
                    <option value="19">19</option>
                    <option value="20">20</option>
                    <option value="21">21</option>
                    <option value="22">22</option>
                    <option value="23">23</option>
                  </select>
                </div>
                <div class="form-group col-sm-3 m-0 pt-1">
                  <button class="btn btn-primary mr-2 mt-4" type="button" (click)="SavePublishSchedule()">Save</button>
                </div>
              </div>
            </ng-template>
          </li>
        </ul>
        <div [ngbNavOutlet]="tPublish" class="mt-2"></div>
        </div>
        </div>
       
   
  </div>
</ng-template>

<ng-template #modalManageGroups let-c="close" let-d="dismiss">
  <div class="modal-header bg-primary">
    <h5 class="text-white">Groups</h5>
    <button
      type="button"
      class="close text-white"
      aria-label="Close"
      (click)="t.select(3)"
      (click)="tokenInfoClose()"
    >
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <app-managegroups></app-managegroups>
  </div>
</ng-template>

<ng-template #DeletePlaylistSongsModal let-c="close" let-d="dismiss">
  <div class="modal-header bg-primary">
    <h5 class="text-white">Delete songs with percentage</h5>
    <button
      type="button"
      class="close text-white"
      aria-label="Close"
      (click)="d('Cross click')"
    >
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <div class="container-fluid">
      <div class="row">
        <div class="col-sm-12 p-0 m-0">
          <label for="cName" class="mb-2 mr-sm-2">Playlist:</label>
          <select
            name="cName"
            class="custom-select form-control mb-2 mr-sm-2"
            (change)="onChangePlaylist($event.target.value)"
            id="cName"
            [(ngModel)]="cmbPlaylist"
          >
            <option selected value="0"></option>
            <option *ngFor="let fLst of TokenPlaylistList" [value]="fLst.Id">
              {{ fLst.DisplayName }}
            </option>
          </select>
        </div>
      </div>
      <div class="row mt-4" *ngIf="cmbPlaylist != '0'">
        <div class="col-sm-6 p-0 m-0 mb-2">
          <label class="cursor-pointer mr-2" style="vertical-align: sub">
            Delete songs with percentage</label
          >
        </div>
        <div class="col-sm-2 p-0 m-0 mb-2">
          <input
            type="number"
            min="0"
            class="form-control"
            [(ngModel)]="txtDelPer"
          />
        </div>
        <div class="col-sm-4 mb-2 pr-0">
          <button
            *ngIf="txtDelPer == '0'"
            class="btn btn-danger col-sm-12 mr-0"
            disabled
          >
            <i class="fa fa-trash" aria-hidden="true"></i> Delete
          </button>
          <button
            *ngIf="txtDelPer != '0'"
            class="btn btn-danger col-sm-12 mr-0"
            (click)="onDeletePercentageClick(DeletePercentageModal)"
            (click)="d('Cross click')"
          >
            <i class="fa fa-trash" aria-hidden="true"></i> Delete
          </button>
        </div>
        <div class="col-sm-10 p-0 m-0 mb-2 d-none">
          <label class="cursor-pointer mr-2" style="vertical-align: sub">
            Delete songs with number</label
          >
        </div>
        <div class="col-sm-2 p-0 m-0 mb-2 d-none">
          <input type="text" class="form-control" />
        </div>
      </div>
    </div>
  </div>
</ng-template>

<ng-template #DeletePercentageModal let-c="close" let-d="dismiss">
  <div class="modal-header bg-primary">
    <h5 class="text-white">Delete</h5>
    <button
      type="button"
      class="close text-white"
      aria-label="Close"
      (click)="d('Cross click')"
    >
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <div class="container-fluid">
      <div class="row">
        <div class="col-sm-12">
          <p>Are you sure to delete?</p>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-12">
          <button
            class="btn btn-primary col-sm-2 pull-right"
            (click)="d('Cross click')"
          >
            <i class="fa fa-times fa-lg" aria-hidden="true"></i>
          </button>
          <button
            class="btn btn-danger col-sm-2 pull-right mr-2"
            (click)="DeleteTitlePercentage()"
            (click)="d('Cross click')"
          >
            <i class="fa fa-check fa-lg" aria-hidden="true"></i>
          </button>
        </div>
      </div>
    </div>
  </div>
</ng-template>

<ng-template #modalManageOpeningHours let-c="close" let-d="dismiss">
  <div class="modal-header bg-primary">
    <h5 class="text-white">Manage Opening Hours/Reboot Time</h5>
    <button
      type="button"
      class="close text-white"
      aria-label="Close"
      (click)="t.select(3)"
      (click)="tokenInfoClose()"
    >
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <app-openinghour></app-openinghour>
  </div>
</ng-template>

<ng-template #modalUpdateInfo let-c="close" let-d="dismiss">
  <div class="modal-header bg-primary">
    <h5 class="text-white">Manage Player Information</h5>
    <button
      type="button"
      class="close text-white"
      aria-label="Close"
      (click)="t.select(3)"
      (click)="tokenInfoClose()"
    >
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <div class="row mb-2" *ngIf="!uExcel">
      <div class="col-lg-12">
        <label for="btnExport" class="mb-2 mr-sm-2">Step 1.</label>
        <input
          type="button"
          id="btnExport"
          class="btn btn-primary"
          (click)="ExportExcelInfo()"
          value="Export tokens to excel sheet"
          style="width: 100%"
        />
      </div>
    </div>
    <div class="row mb-2" *ngIf="!uExcel">
      <div class="col-lg-12">
        <label for="btnUp" class="mb-2 mr-sm-2">Step 2.</label>
        <input
          type="button"
          id="btnUp"
          class="btn btn-primary"
          (click)="UploadExcelInfo()"
          value="Upload excel sheet"
          style="width: 100%"
        />
      </div>
    </div>

    <div *ngIf="uExcel">
      <div class="row">
        <div class="col-lg-12">
          <input
            type="file"
            name="profile"
            #myInput
            (change)="onSelectedFileInfo($event)"
            id="chooseFile1"
            accept=".xlsx"
            class="btn btn-default border"
            style="width: 100%"
          />
        </div>
      </div>

      <div class="row mt-2">
        <div class="col-lg-12">
          <div *ngIf="fileUpload.status === 'progress'">
            <div class="progress" style="height: 20px; margin-bottom: 20px">
              <div
                class="progress-bar"
                role="progressbar"
                [style.width.%]="fileUpload.message"
                aria-valuenow="25"
                aria-valuemin="0"
                aria-valuemax="100"
              >
                {{ fileUpload.message }}%
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row mt-2">
        <div class="col-lg-12">
          <button
            type="button"
            class="btn btn-danger btn-s float-right ml-2"
            (click)="CancelInfo()"
          >
            Cancel
          </button>
          <button
            type="button"
            class="btn btn-primary btn-s float-right"
            (click)="UploadInfo()"
            (click)="myInput.value = ''"
          >
            <span class="fa fa-cloud-upload"></span> Upload
          </button>
        </div>
      </div>
    </div>
  </div>
</ng-template>


<ng-template #modalphilipsinfo let-c="close" let-d="dismiss">
  <div class="modal-header">
    
    <button
      type="button"
      class="close"
      aria-label="Close"
      (click)="d('Cross click')"
    >
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <app-philipsinfo></app-philipsinfo>
  </div>
</ng-template>


<ng-template #modalMediaTypeDefault let-c="close" let-d="dismiss">
  <div class="modal-header">
    <h5>Set Default Media Type</h5>
    <button
      type="button"
      class="close"
      aria-label="Close"
      (click)="d('Cross click')"
    >
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <table class="table data-table table-striped table-bordered mydatatable">
      <thead class="bg-primary">
        <tr>
          <th scope="col">Media Type</th>
          <th scope="col" style="width: 130px"></th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor=" let mType of CustomerMediaTypeList">
          <td data-label="Media Type">{{ mType.DisplayName }}</td>
          <td data-label="" class="text-primary" (click)="SetMediaTypeDefault(mType.Id)">Set Default</td>
        </tr>
      </tbody>
    </table>
  </div>
</ng-template>


<ng-template #modalEvent let-c="close" let-d="dismiss">
  <div class="modal-header bg-primary">
    <h5 class="text-white">Events/Meeting Rooms</h5>
    <button
      type="button"
      class="close text-white"
      aria-label="Close"
      (click)="d('Cross click')"
    >
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <ul ngbNav #tEvents="ngbNav" (activeId)="1" class="nav-tabs">
      <li [ngbNavItem]="1" class="pr-2" *ngIf="!IschkViewOnly">
        <a ngbNavLink>Upload Events</a>
        <ng-template ngbNavContent>
          <div class="col-sm-12">
            <div class="form-row">
              <div class="form-group col-sm-3 m-0">
                <label for="SearchEvtDate" class="ml-3 mb-2 mr-sm-2">Event Date:</label>
                <input
                id="SearchEvtDate"
                class="form-control mb-2 mr-sm-2"
                [owlDateTimeTrigger]="dtUploadSheetEventDate"
                [(ngModel)]="dtpUploadSheetEventDate"
                [owlDateTime]="dtUploadSheetEventDate"
                readonly
              />
              <owl-date-time
                [pickerType]="'calendar'"
                #dtUploadSheetEventDate
              ></owl-date-time>
              </div>
              <div class="form-group col-sm-6 m-0">
                <label for="chooseFile2" class="mb-2 mr-sm-2">Event File:</label>
                <input
                type="file"
                name="profile"
                #myEventInput
                (change)="onSelectedFile($event)"
                id="chooseFile2"
                accept=".xlsx,.xls"
                class="btn btn-default border"
                style="width: 100%"
              />
              </div>
              <div class="form-group col-sm-3 m-0">
                <button 
                type="button"
                class="btn btn-primary btn-s mt-5"
                (click)="UploadEventSheet()"
                (click)="myEventInput.value = ''"
              >
                <span class="fa fa-cloud-upload"></span> Upload
              </button>
              </div>
            </div>
          </div>
            <div class="row mt-2">
              <div class="col-lg-12">
                <div *ngIf="fileUpload.status === 'progress'">
                  <div class="progress" style="height: 20px; margin-bottom: 20px">
                    <div
                      class="progress-bar"
                      role="progressbar"
                      [style.width.%]="fileUpload.message"
                      aria-valuenow="25"
                      aria-valuemin="0"
                      aria-valuemax="100"
                    >
                      {{ fileUpload.message }}%
                    </div>
                  </div>
                </div>
              </div>
            </div>
           
        </ng-template>
      </li>
      <li [ngbNavItem]="2" class="pr-2">
        <a ngbNavLink>Event List</a>
        <ng-template ngbNavContent>
          <div class="table-responsive">
            <table class="table data-table table-striped table-bordered mydatatable">
              <thead>
                <tr>
                  <th class="bg-primary sticky-top" style="max-width: 40%;width: 40%;">Event Date</th>
                  <th class="bg-primary sticky-top Link-Center_Width"></th>
                  <!--<th class="bg-primary sticky-top Link-Center_Width"></th>-->
                </tr>
              </thead>
              <tbody>
                <tr class="cursor-pointer" *ngFor="let eLst of EventList; let i = index">
                  <td>{{eLst.Id | date:'dd-MMM-yyyy'}}</td>
                  <td class="Link-Center_Width"><a href="javascript:;" (click)="OpenViewContent(viewcontent, eLst.Id,'N')"><i class="fa fa-eye" aria-hidden="true"></i></a> </td>
                  <!--<td class="Link-Center_Width"><a href="javascript:;" (click)="OpenViewContent(viewcontent, eLst.Id,'O')"><i class="fa fa-eye" aria-hidden="true"></i></a> </td>-->
                </tr>
              </tbody>
            </table>
          </div>
        </ng-template>
      </li>
      
      
      <li [ngbNavItem]="3" class="pr-2" *ngIf="!IschkViewOnly">
        <a ngbNavLink>Upload Logo</a>
        <ng-template ngbNavContent>
        <div class="col-sm-12">
          <div class="form-row">
            <div class="form-group col-sm-2 m-0">
              <label for="SearchEvtDate" class="ml-3 mb-2 mr-sm-2">Date:</label>
              <input
              id="SearchEvtDate"
              class="form-control mb-2 mr-sm-2"
              [owlDateTimeTrigger]="dtLogoEventDate"
              [(ngModel)]="dtpLogoEventDate"
              [owlDateTime]="dtLogoEventDate"
              readonly
            />
            <owl-date-time
              [pickerType]="'calendar'"
              (afterPickerClosed)="GetEvent()"
              #dtLogoEventDate
            ></owl-date-time>
            </div>
            <div class="form-group col-sm-4 m-0">
              <label for="cmbEventCust"  class="mb-2 mr-sm-2"  
                >Customer:</label
              >
              <select
                class="custom-select mb-3"
                (change)="onChangeEventCustomer($event.target.value)"
                id="cmbEventCust"
                [(ngModel)]="cmbEventCustomer"
              >
                <option selected value="0"></option>
                <option *ngFor="let cLst of EventCustomerList" [value]="cLst.companyname">
                  {{ cLst.companyname }}
                </option>
              </select>
            </div>
            <div class="form-group col-sm-5 m-0">
              <label for="bkLogo1" class="mb-2 mr-sm-2 w-100">Logo: <span style="cursor: pointer;"><i *ngIf="EventCustomerdata.selected_logoName !=''" (click)="ResetCompanylogo()" class="text-danger fa fa-times-circle" aria-hidden="true"></i></span> </label>
                    <input  id="bkLogo" type="button" (click)="openLibrary(modalCustomerLogo)" class="btn btn-primary  mb-2 mr-sm-2"   value="Logo Library" />
                    <span style="font-size: 11px;"><strong>{{EventCustomerdata.selected_logoName}}</strong></span>
            </div>
            <div class="form-group col-sm-1 m-0 text-right">
              <button 
              type="button"
              class="btn btn-primary btn-s mt-5"
              (click)="SaveRoomCustomerEventWithButtonClick()"
            >
              Save
            </button>
            </div>
          </div>
        </div>
        <div class="col-sm-12">
        <div class="table-responsive">
          <table class="table data-table table-striped table-bordered mydatatable">
            <thead>
              <tr>
                <th class="bg-primary sticky-top" >Time</th>
                <th class="bg-primary sticky-top">Location</th>
                <th class="bg-primary sticky-top">Activity</th>
                <th class="bg-primary sticky-top"style="max-width: 7%;width: 7%;"></th>
              </tr>
            </thead>
            <tbody>
              <tr class="cursor-pointer" *ngFor="let eLst of CustomerEventList; let i = index">
                <td>{{eLst.eventtime}}</td>
                <td>{{eLst.eventvenue}}</td>
                <td>{{eLst.eventdtl}}</td>
                <td style="max-width: 7%;width: 7%;"><a href="javascript:;" (click)="OpenViewEventContent(viewcontent, eLst)"><i class="fa fa-eye" aria-hidden="true"></i></a> </td>

              </tr>
            </tbody>
          </table>
        </div>
      </div>
      </ng-template>
    </li>
<li [ngbNavItem]="4" class="pr-2" *ngIf="!IschkViewOnly">
  <a ngbNavLink>Set Signage Playlist</a>
        <ng-template ngbNavContent>
          <div class="col-sm-12">
            <div class="form-row">
              <div class="form-group col-sm-4 m-0">
                <label for="cmbMeeting"  class="mb-2 mr-sm-2">Rooms:</label>
                <ng-multiselect-dropdown
                id="cmbMeeting"
                [placeholder]="' '"
                [settings]="MeetingSettings"
                [data]="MeetingRoomList"
                [(ngModel)]="SelectedMeetingArray"
                [ngModelOptions]="{ standalone: true }"
              >
              </ng-multiselect-dropdown>



                <!--<select
                  class="custom-select mb-3"
                  (change)="onChangeMeetingRoom($event.target.value)"
                  id="cmbMeeting"
                  [(ngModel)]="cmbMeetingId"
                >
                  <option selected value="0"></option>
                  <option *ngFor="let cLst of MeetingRoomList" [value]="cLst.id">
                    {{ cLst.roomname }}
                  </option>
                </select>-->
              </div>
              <div class="form-group col-sm-3 m-0">
                <label for="cmbFormat"  class="mb-2 mr-sm-2"
                  >Campaign Name:</label
                >
                <select
                  class="custom-select mb-3"
                  (change)="onChangeFormat($event.target.value)"
                  id="cmbFormat"
                  [(ngModel)]="cmbFormatId"
                >
                  <option selected value="0"></option>
                  <option *ngFor="let fLst of FormatList" [value]="fLst.Id">
                    {{ fLst.DisplayName }}
                  </option>
                </select>
              </div>
              <div class="form-group col-sm-3 m-0">
                <label for="cmbPlaylist"  class="mb-2 mr-sm-2"
                  >Playlist Name:</label
                >
                <select
                  class="custom-select mb-3"
                  id="cmbPlaylist"
                  [(ngModel)]="cmbPlaylistId"
                >
                  <option selected value="0"></option>
                  <option *ngFor="let fLst of PlaylistList" [value]="fLst.Id">
                    {{ fLst.DisplayName }}
                  </option>
                </select>
              </div>
              <div class="form-group col-sm-3 m-0 d-none">
                <label for="cmbRoomStatus"  class="mb-2 mr-sm-2"  
                  >Room Status:</label
                >
                <select
                  class="custom-select mb-3"
                  id="cmbRoomStatus"
                  [(ngModel)]="MeetingRoomDetail['roomstatus']"
                >
                  <option selected value="available">Available</option>
                  <option selected value="not available">Not Available</option>
                </select>
              </div>
              <div class="form-group col-sm-2 m-0">
                <button 
                type="button"
                class="btn btn-primary btn-s mt-5"
                (click)="UpdateMeetingInfo(viewcontent)"
              >
                Save
              </button>
              </div>
            </div>
            <div class="form-row mb-2 d-none">
              <div class="form-group col-hlf-2 m-0">
                <img src="assets/images/cp2/cp2-6-default.png" alt="" class="imgCenter">
              </div>
              <div class="form-group col-hlf-2 m-0">
                <img src="assets/images/cp2/cp2-0-default.png" alt="" class="imgCenter">
              </div>
              <div class="form-group col-hlf-2 m-0">
                <img src="assets/images/cp2/cp2-1-default.png" alt="" class="imgCenter">
              </div>
              <div class="form-group col-hlf-2 m-0">
                <img src="assets/images/cp2/cp2-2-default.png" alt="" class="imgCenter">
              </div>
              <div class="form-group col-hlf-2 m-0">
                <img src="assets/images/cp2/cp2-3-default.png" alt="" class="imgCenter">
              </div>
              <div class="form-group col-hlf-2 m-0">
                <img src="assets/images/cp2/cp2-4-default.png" alt="" class="imgCenter">
              </div>
              <div class="form-group col-hlf-2 m-0">
                <img src="assets/images/cp2/cp2-5-default.png" alt="" class="imgCenter">
              </div>
              <div class="form-group col-hlf-2 m-0">
                <img src="assets/images/cp2/cp2-7-default.png" alt="" class="imgCenter">
              </div>
            </div>
            <div class="form-row d-none">
              <div class="form-group col-hlf-2 m-0">
                <input type="number" [(ngModel)]="MeetingRoomDetail['r1']" class="form-control mb-2 mr-sm-2"/>
              </div>
              <div class="form-group col-hlf-2 m-0">
                <input type="number" [(ngModel)]="MeetingRoomDetail['r2']" class="form-control mb-2 mr-sm-2"/>
              </div>
              <div class="form-group col-hlf-2 m-0">
                <input type="number" [(ngModel)]="MeetingRoomDetail['r3']" class="form-control mb-2 mr-sm-2"/>
              </div>
              <div class="form-group col-hlf-2 m-0">
                <input type="number" [(ngModel)]="MeetingRoomDetail['r4']" class="form-control mb-2 mr-sm-2"/>
              </div>
              <div class="form-group col-hlf-2 m-0">
                <input type="number" [(ngModel)]="MeetingRoomDetail['r5']" class="form-control mb-2 mr-sm-2"/>
              </div>
              <div class="form-group col-hlf-2 m-0">
                <input type="number" [(ngModel)]="MeetingRoomDetail['r6']" class="form-control mb-2 mr-sm-2"/>
              </div>
              <div class="form-group col-hlf-2 m-0">
                <input type="number" [(ngModel)]="MeetingRoomDetail['r7']" class="form-control mb-2 mr-sm-2"/>
              </div>
              <div class="form-group col-hlf-2 m-0">
                <input type="number" [(ngModel)]="MeetingRoomDetail['r8']" class="form-control mb-2 mr-sm-2"/>
              </div>
            </div>
          </div>
          <div class="col-sm-12">
            <div class="table-responsive">
              <table class="table data-table table-striped table-bordered mydatatable">
                <thead>
                  <tr>
                    <th class="bg-primary sticky-top" >Room Name</th>
                    <th class="bg-primary sticky-top">Campaign Name</th>
                    <th class="bg-primary sticky-top">Playlist Name</th>
                  </tr>
                </thead>
                <tbody>
                  <tr class="cursor-pointer" *ngFor="let eLst of RoomSignagePlaylist; let i = index">
                    <td>{{eLst.roomname}}</td>
                    <td>{{eLst.FormatName}}</td>
                    <td>{{eLst.splPlaylistName}}</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </ng-template>
      </li>
      <li [ngbNavItem]="5" class="pr-2" *ngIf="!IschkViewOnly">
        <a ngbNavLink>Promo Logo</a>
        <ng-template ngbNavContent>
          <div class="col-12 p-0">
            <div class="form-row">
            <div class="form-group col-sm-6 m-0">
              <label for="chooseFile2" class="mb-2 mr-sm-2">Upload Promo Logo:</label>
              <input
              type="file"
              name="profile"
              #myEventLogoInput
              (change)="onSelectedFile($event)"
              id="chooseFile2"
              accept="image/jpeg, image/x-png"
              class="btn btn-default border"
              style="width: 100%"
            />
            </div>
            <div class="form-group col-sm-3 m-0">
              <button 
              type="button"
              class="btn btn-primary btn-s mt-5"
              (click)="UploadPromoLogo()"
              (click)="myEventLogoInput.value = ''"
            >
              <span class="fa fa-cloud-upload"></span> Upload
            </button>
            </div>
          </div>
          </div>
          <div class="row mt-2">
            <div class="col-lg-12">
              <div *ngIf="fileUpload.status === 'progress'">
                <div class="progress" style="height: 20px; margin-bottom: 20px">
                  <div
                    class="progress-bar"
                    role="progressbar"
                    [style.width.%]="fileUpload.message"
                    aria-valuenow="25"
                    aria-valuemin="0"
                    aria-valuemax="100"
                  >
                    {{ fileUpload.message }}%
                  </div>
                </div>
              </div>
            </div>
          </div>
           <div class="row mt-3">
            <div class="col-sm-3 mb-2" *ngFor="let songLst of PromoLogoList">
              <div class="card">
                <img
                  class="card-img-top p-1"
                  src="{{ songLst.TitleIdLink }}"
                  alt="Card image"
                  style="height: 100px; object-fit: contain"
                />
                <div class="card-body p-1 border-top">
                  <a *ngIf="songLst.IsFindPromo=='0'" href="javascript:;" (click)="OpenPromoLogoDate(modalPromoLogoDate,songLst.id, songLst.IsFindPromo)"
                    class="btn btn-primary btn-sm">Set</a>
                    <a *ngIf="songLst.IsFindPromo=='1'" href="javascript:;" (click)="SetUnsetPromoLogo(songLst.id, songLst.IsFindPromo)"
                    class="btn btn-primary btn-sm">UnSet</a>
                    <a href="javascript:;" (click)="DeleteLogoModal(LogoDeleteModal, songLst.id)" class="btn btn-danger btn-sm"
              style="padding: 7px; margin: 0px; float: right">
              <i class="fa fa-trash-o float-right p-0 m-0" aria-hidden="true"></i>
            </a>

            <a *ngIf="songLst.IsFindPromo=='1'" href="javascript:;" class="btn btn-success btn-sm"
            style="padding: 7px; margin: 0px; float: right;margin-right: 3px;">
          <i class="fa fa-check-circle float-right p-0 m-0" aria-hidden="true"></i>
          </a>
            
                </div>
              </div>
            </div>
          </div>
        </ng-template>
      </li>
    </ul>
    <div [ngbNavOutlet]="tEvents" class="mt-2"></div>
     
  </div>
</ng-template>
<ng-template class="tokenmodal" #viewcontent let-c="close" let-d="dismiss">
  
  <button
    type="button"
    class="close text-right"
    aria-label="Close"
    (click)="d('Cross click')"
  >
    <span aria-hidden="true">&times;</span>
  </button>
 
<div class="modal-body p-0">
  <app-view-content></app-view-content>
</div>
</ng-template>

<ng-template #modalCustomerLogo let-c="close" let-d="dismiss">
  <div class="modal-header bg-primary">
    <h5 class="text-white">Library</h5>
    <button
      type="button"
      class="close text-white"
      aria-label="Close"
      (click)="d('Cross click')"
    >
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <div class="col-12 p-0">
      <div class="form-row">
      <div class="form-group col-sm-6 m-0">
        <label for="chooseFile2" class="mb-2 mr-sm-2">Logo:</label>
        <input
        type="file"
        name="profile"
        #myEventLogoInput
        (change)="onSelectedFile($event)"
        id="chooseFile2"
        accept="image/jpeg, image/x-png"
        class="btn btn-default border"
        style="width: 100%"
      />
      </div>
      <div class="form-group col-sm-3 m-0">
        <button 
        type="button"
        class="btn btn-primary btn-s mt-5"
        (click)="UploadCustomerLogo()"
        (click)="myEventLogoInput.value = ''"
      >
        <span class="fa fa-cloud-upload"></span> Upload
      </button>
      </div>
    </div>
    </div>
    <div class="row mt-2">
      <div class="col-lg-12">
        <div *ngIf="fileUpload.status === 'progress'">
          <div class="progress" style="height: 20px; margin-bottom: 20px">
            <div
              class="progress-bar"
              role="progressbar"
              [style.width.%]="fileUpload.message"
              aria-valuenow="25"
              aria-valuemin="0"
              aria-valuemax="100"
            >
              {{ fileUpload.message }}%
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="row mt-2">
      <div class="col-sm-4 col-6 mb-2" *ngFor="let songLst of SongsList">
        <div class="card">
          <img
            class="card-img-top p-1"
            src="{{ songLst.TitleIdLink }}"
            alt="Card image"
            style="height: 100px; object-fit: contain"
          />
          <div class="card-body p-1 border-top">
            <a
              href="javascript:;"
              (click)="SetImage(songLst.TitleIdLink, songLst.title,1,songLst.id)" (click)="d('Cross click')"
              class="btn btn-primary btn-sm"
              >Set</a
            >
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-template>


<ng-template #modalPromoLogoDate let-c="close" let-d="dismiss">
  <div class="modal-header bg-primary">
    <h5 class="text-white">&nbsp;</h5>
    <button
      type="button"
      class="close text-white"
      aria-label="Close"
      (click)="d('Cross click')"
    >
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
   <div class="form-row">
    <div class="form-group col-sm-6 pb-1 m-0">
      <label for="dtPromosDate" class="mb-2 mr-sm-2">Start Date:</label>
      <input
        id="dtPromosDate"
        [(ngModel)]="dtPromoStartDate"
        class="form-control mb-2 mr-sm-2"
        [owlDateTimeTrigger]="dtPromosDate"
        [owlDateTime]="dtPromosDate"
        readonly
      />
      <owl-date-time [pickerType]="'calendar'" #dtPromosDate></owl-date-time>
    </div>
    <div class="form-group col-sm-6 pb-1 m-0">
      <label for="dtPromoEDate" class="mb-2 mr-sm-2">End Date:</label>
      <input
        id="dtPromoEDate"
        [(ngModel)]="dtPromoEndDate"
        class="form-control mb-2 mr-sm-2"
        [owlDateTimeTrigger]="dtPromoEDate"
        [owlDateTime]="dtPromoEDate"
        readonly
      />
      <owl-date-time [pickerType]="'calendar'" #dtPromoEDate></owl-date-time>
    </div>
   </div>
   <div class="row">
    <div class="col-lg-12">
      <button class="btn btn-primary mr-2 pull-right" type="button" (click)="onSubmitPromoDate()" (click)="d('Cross click')">
      Save
    </button>
    </div>
   </div>
  </div>
</ng-template>

<ng-template #modalExpiryDate let-c="close" let-d="dismiss">
  <div class="modal-header bg-primary">
    <h5 class="text-white">Set Expiry Date</h5>
    <button
      type="button"
      class="close text-white"
      aria-label="Close"
      (click)="d('Cross click')"
    >
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    
       
              <div class="row">
                <div class="col-lg-6">
                  <input
                  id="txtSearchExt"
                  type="text"
                  [(ngModel)]="searchTextPublish"
                  class="text search-input"
                  placeholder="Search"
                  class="form-control mb-2 mr-sm-2 w-75 mt-4"
                  (input)="onChangeEvent()"
                />
                </div>
                <div class="form-group col-lg-4">
                  <label for="dtTokenEDate" class="mb-2 mr-sm-2">Expiry Date:</label>
      <input
        id="dtTokenEDate"
        [(ngModel)]="dtTokenExpiryDate"
        class="form-control mb-2 mr-sm-2"
        [owlDateTimeTrigger]="dtTokenEDate"
        [owlDateTime]="dtTokenEDate"
        readonly
      />
      <owl-date-time [pickerType]="'calendar'" #dtTokenEDate></owl-date-time>
                </div>
                <div class="col-lg-2">
                  
                  <input
                    type="button"
                    class="btn btn-primary pull-right mb-2 mt-4"
                    value="Save"
                    (click)="UpdatePlayerExpire()"
                  />
                </div>
                <div class="col-sm-12 font-weight-bold mb-3 p-0" >
                  <p style="margin: 0 !important">You can use any keyword from media type, city , location,token no. For Example: Audio, Video, Signage etc.</p>
                </div>
                    <div class="col-lg-12 m-0 p-0">
                  <div class="table-responsive">
                    <table
                      class="table data-table table-striped table-bordered mydatatable"
                    >
                      <thead class="bg-primary text-white">
                        <tr>
                          <th scope="col" style="width: 60px">
                            <div class="custom-control custom-checkbox">
                              <input
                                (change)="allActiveToken($event)"
                                type="checkbox"
                                class="custom-control-input"
                                name="AllActiveToken"
                                id="AllActiveToken"
                                [(ngModel)]="chkAll"
                              />
                              <label
                                class="custom-control-label cursor-pointer pt-1 text-white"
                                for="AllActiveToken"
                                >All</label
                              >
                            </div>
                          </th>
                          <th scope="col" sortable="city" (sort)="onSort($event)">City</th>
                          <th scope="col" sortable="location" (sort)="onSort($event)">Location</th>
                          <th scope="col" sortable="tokenCode" (sort)="onSort($event)">Token No</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="let tLst of ActiveTokenList | filter:searchTextPublish | slice
                        : (page - 1) * pageSize
                        : (page - 1) * pageSize + pageSize; let i = index ">
                          <td data-label="" class="">
                            <div class="custom-control custom-checkbox">
                              <input
                                (change)="SelectActiveToken(tLst.tokenid, $event)"
                                type="checkbox"
                                class="custom-control-input"
                                id="{{ tLst.tokenid }}{{ i }}"
                                [checked]="tLst.check"
                                name="chkTokenList"
                              />
                              <label
                                class="custom-control-label cursor-pointer"
                                for="{{ tLst.tokenid }}{{ i }}"
                              ></label>
                            </div>
                          </td>
                          <td data-label="City">{{ tLst.city }}</td>
                          <td data-label="Location">{{ tLst.location }}</td>
                          <td data-label="Token No">{{ tLst.tokenCode }}</td>
                        </tr>
                      </tbody>
                    </table>
                    <ngb-pagination
                                    [collectionSize]="ActiveTokenListlength"
                                    [(page)]="page"
                                    [pageSize]="pageSize"
                                    [boundaryLinks]="true"
                  size="sm"
                                    (click)="GetCheckedToken()"
                                  ></ngb-pagination>
                  </div>
                </div>
              </div>
        
        
         
       
    
  </div>
</ng-template>